// Common transition variables
@transition-smooth: 0.3s cubic-bezier(0.4, 0, 0.2, 1);
@transition-fast: 0.2s ease;

.task-card {
  background-color: var(--color-surface);
  border: 1px solid var(--color-border-light);
  border-radius: 12px;
  overflow: hidden;
  transition: all @transition-smooth;
  cursor: pointer;
  box-shadow:
    0 1px 3px rgba(0, 0, 0, 0.12),
    0 1px 2px rgba(0, 0, 0, 0.24);

  &:hover {
    box-shadow:
      0 4px 6px rgba(0, 0, 0, 0.07),
      0 4px 12px rgba(0, 0, 0, 0.12);
    border-color: var(--color-border-medium);
    transform: translateY(-2px);
  }

  &.expanded {
    box-shadow:
      0 4px 6px rgba(0, 0, 0, 0.07),
      0 4px 12px rgba(0, 0, 0, 0.12);
    border-color: var(--color-accent);
  }

  .task-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 20px 24px;
    background-color: var(--color-surface);
    transition: background-color @transition-fast;

    &:hover {
      background-color: var(--color-surface-secondary);
    }

    .task-info {
      flex: 1;

      .task-title {
        margin: 0 0 4px 0;
        font-size: 20px;
        font-weight: 600;
        color: var(--color-text-primary);
      }

      .task-description {
        margin: 0;
        font-size: 13px;
        color: var(--color-text-secondary);
      }
    }

    .task-progress {
      display: flex;
      align-items: center;
      gap: 16px;

      .progress-text {
        font-size: 13px;
        font-weight: 600;
        color: var(--color-text-tertiary);
        background-color: var(--color-surface-tertiary);
        padding: 4px 8px;
        border-radius: 20px;
      }

      .action-buttons {
        display: flex;
        gap: 4px;
        opacity: 0;
        transition: opacity @transition-fast;

        .ant-btn {
          width: 28px;
          height: 28px;
          border-radius: 6px;
          display: flex;
          align-items: center;
          justify-content: center;

          &:hover {
            background-color: var(--color-surface-tertiary);
          }

          &.ant-btn-dangerous:hover {
            background-color: var(--color-danger-soft);
            color: var(--color-danger);
          }
        }
      }
    }

    &:hover .action-buttons {
      opacity: 1;
    }
  }

  .task-details {
    overflow: auto;
    background-color: var(--color-surface-secondary);
    border-top: 1px solid var(--color-border-light);
    transition: all @transition-smooth;

    &.collapsed {
      max-height: 0;
      padding: 0 24px;
      opacity: 0;
      transform: translateY(-10px);
    }

    &.expanded {
      max-height: 1000px;
      padding: 24px;
      opacity: 1;
      transform: translateY(0);
    }

    .progress-bar-container {
      margin-bottom: 24px;

      .ant-progress {
        .ant-progress-bg {
          border-radius: 4px;
        }
      }
    }
  }
}

// Responsive design
@media (max-width: 768px) {
  .task-card {
    .task-header {
      flex-direction: column;
      align-items: stretch;
      gap: 12px;

      .task-progress {
        justify-content: space-between;
      }
    }

    .task-details {
      padding: 16px;
    }
  }
}
